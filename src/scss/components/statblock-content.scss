@use 'attribution';
@use 'font';
@use 'style-settings';
@use 'statblock-types' as statblocks;
@use '../themes/default' as default;

$path2e-bar-color: rgba(51, 51, 51, 1);
$i-like-zeros: 0;
$margin-left: 1em;
$half-length: 0.5em;
$margin-block: 0.25rem;
$flex: flex;


@each $block_name in statblocks.$names {
	.statblock.#{$block_name} {
		.statblock-content {
			background-color: var(--statblock-background-color);
			border: var(--statblock-border-size) var(--statblock-border-color) solid;
			box-shadow: none;
			color: var(--statblock-property-font-color);
			display: $flex;
			font-family: var(--statblock-content-font);
			font-size: var(--statblock-content-font-size);
			margin: $half-length 2px;
			padding: $half-length;
			gap: 1rem;


			.statblock-detached {
				position: absolute;
				top: -9999px;
			}

			.statblock-item-container {
				margin: $i-like-zeros;
				padding: $i-like-zeros;
			}

			.statblock-item-inline {
				align-content: flex-start;
				align-items: baseline;
				display: $flex;
				flex-direction: row;
				flex-wrap: wrap;
				justify-content: flex-start;
				margin: $i-like-zeros;
				padding: $i-like-zeros;
			}

			& > .column {
				width: var(--statblock-column-width);
				& > :is(.statblock-item-container, .statblock-item-inline) {
					&:has(.line, .property) {
						margin-block: $margin-block;

						&:last-child {
							margin-bottom: $i-like-zeros;
						}
					}
					&:has(.line.name) {
						margin: $i-like-zeros;
					}
					& > :is(.property, .line:has(.property-name)) {
						margin-left: $margin-left;
					}

					& > :is(.property, .line) .property-name {
						margin-left: -$margin-left;
					}
				}
				& > .statblock-item-container:has(.tapered-rule) {
					margin-block: $margin-block;
				}

				& > .statblock-item-inline:has(.name) + .statblock-item-container:has(.tapered-rule) {
					margin-top: $i-like-zeros;
				}

				& > .statblock-item-inline:has(.rare_01,
					.rare_02,
					.rare_03,
					.rare_04,
					.alignment,
					.size,
					.xp,
					.kingdom_xp,
					.trait_01,
					.trait_02,
					.trait_03,
					.trait_04,
					.trait_05,
					.trait_06,
					.trait_07) {
					row-gap: var(--statblock-traits-gap);

					@if $block_name == 'basic-pathfinder-2e-layout' {
						margin-top: $half-length;
					} @else {
						margin-bottom: $half-length;
					}
				}

				/* Hazard Block Specific */
				@if $block_name == 'pathfinder-2e-hazard-layout' {
					& > .statblock-item-container:has(.effect) {
						margin-left: $margin-left;
					}
				}
			}
		}
	}
}
